<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>PDD TEST PRO</title>
    <style>
        :root {
            --apple-blue: #007aff;
            --apple-red: #ff3b30;
            --glass: rgba(255, 255, 255, 0.96);
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; user-select: none; }
        
        body, html { 
            height: 100%; width: 100%; 
            background-color: #000; 
            font-family: -apple-system, system-ui, sans-serif; 
            overflow: hidden; 
        }

        #web-wrapper { 
            position: absolute; 
            top: 0; left: 0; right: 0; bottom: 0; 
            background: #fff;
            transition: transform 0.6s cubic-bezier(0.32, 0.72, 0, 1), border-radius 0.6s;
        }

        iframe { width: 100%; height: 100%; border: none; display: block; }

        body.menu-open #web-wrapper {
            transform: scale(0.95);
            border-radius: 20px;
            opacity: 0.7;
        }

        /* –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–≤–∞–π–ø–æ–≤ */
        #ios-menu {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: var(--glass); 
            backdrop-filter: blur(30px) saturate(200%); 
            -webkit-backdrop-filter: blur(30px) saturate(200%);
            border-top: 1px solid rgba(0,0,0,0.05); 
            z-index: 9999;
            transition: transform 0.5s cubic-bezier(0.32, 0.72, 0, 1);
            padding-bottom: env(safe-area-inset-bottom);
            border-radius: 30px 30px 0 0;
            transform: translateY(calc(100% - 75px)); /* –í–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ —à–∞–ø–∫–∞ */
            touch-action: none; /* –û—Ç–∫–ª—é—á–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–∫—Ä–æ–ª–ª –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –º–µ–Ω—é */
        }

        #ios-menu.open {
            transform: translateY(0);
        }

        .handle-container { 
            padding: 18px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            cursor: pointer;
            touch-action: pan-y; /* –†–∞–∑—Ä–µ—à–∞–µ–º —Ç—è–Ω—É—Ç—å –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
        }

        .handle { 
            width: 36px; height: 5px; 
            background: rgba(0,0,0,0.12); 
            border-radius: 10px; 
            margin-bottom: 8px; 
        }

        .brand { 
            font-weight: 800; 
            font-size: 20px; 
            background: linear-gradient(135deg, #FF2D55 0%, #FF9500 100%); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            letter-spacing: -0.8px;
        }

        #chapters-list { 
            max-height: 75vh; 
            overflow-y: auto; 
            padding: 0 16px 40px 16px; 
            opacity: 0;
            transition: opacity 0.3s;
            touch-action: pan-y; /* –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫—Ä–æ–ª–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤–Ω—É—Ç—Ä–∏ */
        }

        #ios-menu.open #chapters-list {
            opacity: 1;
        }

        .chapter-btn { 
            width: 100%; 
            padding: 18px; 
            background: rgba(0,0,0,0.04); 
            border: none; 
            border-radius: 16px; 
            font-size: 16px; 
            font-weight: 600; 
            color: #1c1c1e; 
            margin-bottom: 10px; 
            text-align: left;
        }

        .chapter-btn.active { 
            background: var(--apple-blue); 
            color: #fff; 
        }
        
        .reset-btn { color: var(--apple-red); text-align: center; font-weight: 700; }
    </style>
</head>
<body>

    <main id="web-wrapper">
        <iframe id="frame" src="https://pddtest.kz/tests/116573900"></iframe>
    </main>

    <nav id="ios-menu">
        <div class="handle-container" id="drag-handle">
            <div class="handle"></div>
            <div class="brand">PDD TEST PRO</div>
        </div>

        <div id="chapters-list">
            <button class="chapter-btn active" onclick="changePage('https://pddtest.kz/tests/116573900', this)">1. –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116694748', this)">4. –ü–∞—Å—Å–∞–∂–∏—Ä—ã</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116695046', this)">5. –°–≤–µ—Ç–æ—Ñ–æ—Ä—ã</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116695267', this)">6. –°–ø–µ—Ü—Å–∏–≥–Ω–∞–ª—ã</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116695393', this)">7. –ê–≤–∞—Ä–∏–π–∫–∞</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116695609', this)">8. –ú–∞–Ω–µ–≤—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116695699', this)">9. –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¢–°</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116695865', this)">10. –°–∫–æ—Ä–æ—Å—Ç—å</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116695998', this)">11. –û–±–≥–æ–Ω</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116696089', this)">12. –û—Å—Ç–∞–Ω–æ–≤–∫–∞</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116696211', this)">13. –ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∏</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116696308', this)">14. –ü–µ—Ä–µ—Ö–æ–¥—ã</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116696458', this)">16. –ê–≤—Ç–æ–º–∞–≥–∏—Å—Ç—Ä–∞–ª–∏</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116696872', this)">17. –ñ–∏–ª—ã–µ –∑–æ–Ω—ã</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116697005', this)">18. –ú–∞—Ä—à—Ä—É—Ç–Ω—ã–µ –¢–°</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116697201', this)">19. –°–≤–µ—Ç –∏ –∑–≤—É–∫</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116697512', this)">20. –ë—É–∫—Å–∏—Ä–æ–≤–∫–∞</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116697704', this)">21. –£—á–µ–±–Ω–∞—è –µ–∑–¥–∞</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116697798', this)">22. –ü–µ—Ä–µ–≤–æ–∑–∫–∞ –ª—é–¥–µ–π</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116697917', this)">23. –ü–µ—Ä–µ–≤–æ–∑–∫–∞ –≥—Ä—É–∑–æ–≤</button>
            <button class="chapter-btn" onclick="changePage('https://pddtest.kz/tests/116698417', this)">üèÅ –í—Å–µ –¥–æ—Ä–æ–∂–Ω—ã–µ –∑–Ω–∞–∫–∏</button>
            <button class="chapter-btn reset-btn" onclick="location.reload()">–û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É</button>
        </div>
    </nav>

    <script>
        const menu = document.getElementById('ios-menu');
        const frame = document.getElementById('frame');
        const dragHandle = document.getElementById('drag-handle');
        
        let startY = 0;
        let currentY = 0;
        let isOpened = false;

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–∫–æ–º
        dragHandle.addEventListener('click', () => {
            toggleMenu(!isOpened);
        });

        function toggleMenu(open) {
            isOpened = open;
            menu.classList.toggle('open', open);
            document.body.classList.toggle('menu-open', open);
            menu.style.transform = ''; // –°–±—Ä–æ—Å —Ä—É—á–Ω–æ–≥–æ —Å–¥–≤–∏–≥–∞
        }

        // –õ–æ–≥–∏–∫–∞ –°–≤–∞–π–ø–∞ (Touch Events)
        dragHandle.addEventListener('touchstart', (e) => {
            startY = e.touches[0].clientY;
            menu.style.transition = 'none'; // –û—Ç–∫–ª—é—á–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ–∫–∞ —Ç—è–Ω–µ–º
        }, {passive: true});

        dragHandle.addEventListener('touchmove', (e) => {
            currentY = e.touches[0].clientY;
            let diff = currentY - startY;

            if (!isOpened && diff < 0) { // –¢—è–Ω–µ–º –≤–≤–µ—Ä—Ö –∑–∞–∫—Ä—ã—Ç–æ–µ
                menu.style.transform = `translateY(calc(100% - 75px + ${diff}px))`;
            } else if (isOpened && diff > 0) { // –¢—è–Ω–µ–º –≤–Ω–∏–∑ –æ—Ç–∫—Ä—ã—Ç–æ–µ
                menu.style.transform = `translateY(${diff}px)`;
            }
        }, {passive: true});

        dragHandle.addEventListener('touchend', (e) => {
            menu.style.transition = 'transform 0.5s cubic-bezier(0.32, 0.72, 0, 1)';
            let diff = currentY - startY;

            if (Math.abs(diff) > 100) { // –ï—Å–ª–∏ –ø—Ä–æ—Ç—è–Ω—É–ª–∏ –±–æ–ª—å—à–µ 100px
                toggleMenu(diff < 0); // –ï—Å–ª–∏ diff –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ–º (–≤–≤–µ—Ä—Ö), –∏–Ω–∞—á–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º
            } else {
                toggleMenu(isOpened); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ
            }
        });

        function changePage(url, btn) {
            frame.src = url;
            document.querySelectorAll('.chapter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            toggleMenu(false);
        }
    </script>
</body>
</html>
