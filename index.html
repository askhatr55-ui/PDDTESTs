<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–í–¢–® –¢–ê–õ–î–´–ö–û–†–ì–ê–ù</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body, html { height: 100%; width: 100%; overflow: hidden; background: #000; font-family: -apple-system, sans-serif; }
        
        #layout { display: flex; width: 100%; height: 100%; }
        #frame { width: 100%; height: 100%; border: none; display: block; }
        
        /* –ü–ö –º–µ–Ω—é —Å–ª–µ–≤–∞ */
        #sidebar { width: 320px; height: 100%; background: #fff; display: none; flex-direction: column; box-shadow: 2px 0 10px rgba(0,0,0,0.1); z-index: 1000; }
        
        /* –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é —Å–Ω–∏–∑—É */
        #menu { 
            position: fixed; bottom: 0; left: 0; right: 0; height: 50vh; 
            background: #fff; border-radius: 30px 30px 0 0; z-index: 9999; 
            transform: translateY(calc(50vh - 70px)); touch-action: none; 
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: transform;
        }

        @media (min-width: 769px) {
            #sidebar { display: flex; }
            #menu { display: none; }
        }

        .handle { height: 70px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .line { width: 60px; height: 6px; background: #ccc; border-radius: 5px; }
        #content { height: 100%; overflow-y: auto; padding: 20px; -webkit-overflow-scrolling: touch; }
        
        /* –ë–∞–∑–æ–≤—ã–π —Å—Ç–∏–ª—å –∫–Ω–æ–ø–æ–∫ */
        .btn { display: block; width: 100%; padding: 18px; margin-bottom: 12px; border: none; border-radius: 15px; font-weight: bold; cursor: pointer; text-align: center; transition: all 0.2s; }
        .btn:active { opacity: 0.6; transform: scale(0.98); }
        
        .btn-action { background: #007aff; color: #fff; }
        .btn-refresh { background: #5856d6; color: #fff; }
        .btn-exit { background: #ff3b30; color: #fff; }
        
        /* –°—Ç–∏–ª—å –∫–Ω–æ–ø–æ–∫ –≥–ª–∞–≤ (—Å—Å—ã–ª–æ–∫) */
        .link-btn { text-align: left; padding-left: 20px; position: relative; overflow: hidden; color: #000; }
        
        /* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å */
        hr { margin: 20px 0; border: 0; border-top: 1px solid #eee; }
    </style>
</head>
<body>

<div id="layout">
    <div id="sidebar">
        <div id="content"><div id="sidebar-links"></div></div>
    </div>
    <iframe id="frame" name="main-frame" src="https://pddtest.kz/"></iframe>
</div>

<div id="menu">
    <div class="handle" id="handle"><div class="line"></div></div>
    <div id="content"><div id="mobile-links"></div></div>
</div>

<script>
    // –¶–≤–µ—Ç–∞ –≤ —Å—Ç–∏–ª–µ iOS –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≥–ª–∞–≤
    const iosColors = [
        '#E3F2FD', // –°–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π
        '#F3E5F5', // –°–≤–µ—Ç–ª–æ-–ø—É—Ä–ø—É—Ä–Ω—ã–π
        '#E8F5E9', // –°–≤–µ—Ç–ª–æ-–∑–µ–ª–µ–Ω—ã–π
        '#FFF3E0', // –°–≤–µ—Ç–ª–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π
        '#FCE4EC', // –°–≤–µ—Ç–ª–æ-—Ä–æ–∑–æ–≤—ã–π
        '#E0F2F1', // –°–≤–µ—Ç–ª–æ-–±–∏—Ä—é–∑–æ–≤—ã–π
        '#FFFDE7', // –°–≤–µ—Ç–ª–æ-–∂–µ–ª—Ç—ã–π
        '#F5F5F5'  // –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π
    ];

    const links = [
        {name: "1. –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è", url: "https://pddtest.kz/tests/116573900"},
        {name: "4. –ü–∞—Å—Å–∞–∂–∏—Ä—ã", url: "https://pddtest.kz/tests/116694748"},
        {name: "5. –°–≤–µ—Ç–æ—Ñ–æ—Ä—ã", url: "https://pddtest.kz/tests/116695046"},
        {name: "6. –°–ø–µ—Ü—Å–∏–≥–Ω–∞–ª—ã", url: "https://pddtest.kz/tests/116695267"},
        {name: "7. –ê–≤–∞—Ä–∏–π–∫–∞", url: "https://pddtest.kz/tests/116695393"},
        {name: "8. –ú–∞–Ω–µ–≤—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ", url: "https://pddtest.kz/tests/116695609"},
        {name: "9. –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¢–°", url: "https://pddtest.kz/tests/116695699"},
        {name: "10. –°–∫–æ—Ä–æ—Å—Ç—å", url: "https://pddtest.kz/tests/116695865"},
        {name: "11. –û–±–≥–æ–Ω", url: "https://pddtest.kz/tests/116695998"},
        {name: "12. –û—Å—Ç–∞–Ω–æ–≤–∫–∞", url: "https://pddtest.kz/tests/116696089"},
        {name: "13. –ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∏", url: "https://pddtest.kz/tests/116696211"},
        {name: "14. –ü–µ—Ä–µ—Ö–æ–¥—ã", url: "https://pddtest.kz/tests/116696308"},
        {name: "16. –ê–≤—Ç–æ–º–∞–≥–∏—Å—Ç—Ä–∞–ª–∏", url: "https://pddtest.kz/tests/116696458"},
        {name: "17. –ñ–∏–ª—ã–µ –∑–æ–Ω—ã", url: "https://pddtest.kz/tests/116696872"},
        {name: "18. –ú–∞—Ä—à—Ä—É—Ç–Ω—ã–µ –¢–°", url: "https://pddtest.kz/tests/116697005"},
        {name: "19. –°–≤–µ—Ç –∏ –∑–≤—É–∫", url: "https://pddtest.kz/tests/116697201"},
        {name: "20. –ë—É–∫—Å–∏—Ä–æ–≤–∫–∞", url: "https://pddtest.kz/tests/116697512"},
        {name: "21. –£—á–µ–±–Ω–∞—è –µ–∑–¥–∞", url: "https://pddtest.kz/tests/116697704"},
        {name: "22. –ü–µ—Ä–µ–≤–æ–∑–∫–∞ –ª—é–¥–µ–π", url: "https://pddtest.kz/tests/116697798"},
        {name: "23. –ü–µ—Ä–µ–≤–æ–∑–∫–∞ –≥—Ä—É–∑–æ–≤", url: "https://pddtest.kz/tests/116697917"},
        {name: "24. –í–µ–ª–æ—Å–∏–ø–µ–¥—ã/–º–æ–ø–µ–¥—ã", url: "https://pddtest.kz/tests/116698038"},
        {name: "25. –ì—É–∂–µ–≤—ã–µ –ø–æ–≤–æ–∑–∫–∏", url: "https://pddtest.kz/tests/116698229"},
        {name: "üèÅ –í—Å–µ –∑–Ω–∞–∫–∏", url: "https://pddtest.kz/tests/116698417"}
    ];

    const frame = document.getElementById('frame'), menu = document.getElementById('menu'), handle = document.getElementById('handle');
    let idleTimer;
    const SESSION_TIMEOUT = 30 * 60 * 1000;

    function resetSystem() {
        frame.src = 'https://pddtest.kz/logout';
        setTimeout(() => { frame.src = 'https://pddtest.kz/'; toggle(false); }, 1000);
    }

    function goToAuth() { window.location.href = 'https://pddtest.kz/auth'; }

    function refreshFrame() {
        let u = frame.src;
        frame.src = 'about:blank';
        setTimeout(() => { frame.src = u; toggle(false); }, 50);
    }

    function resetIdleTimer() { 
        clearTimeout(idleTimer); 
        idleTimer = setTimeout(resetSystem, SESSION_TIMEOUT); 
    }

    ['mousedown', 'touchstart', 'keydown', 'scroll'].forEach(evt => document.addEventListener(evt, resetIdleTimer, true));

    function toggle(open) { menu.style.transform = open ? 'translateY(0)' : 'translateY(calc(50vh - 70px))'; }
    handle.addEventListener('click', () => toggle(menu.style.transform !== 'translateY(0px)'));

    function buildMenu(containerId) {
        const container = document.getElementById(containerId);
        container.innerHTML = `
            <button class="btn btn-action" onclick="goToAuth()">üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</button>
            <button class="btn btn-refresh" onclick="refreshFrame()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            <button class="btn btn-exit" onclick="resetSystem()">üö™ –í—ã–π—Ç–∏</button>
            <hr>
        `;
        
        links.forEach((l, index) => {
            let b = document.createElement('button');
            b.className = 'btn link-btn'; 
            b.innerText = l.name;
            
            // –ù–∞–∑–Ω–∞—á–∞–µ–º —Ü–≤–µ—Ç –∏–∑ –ø–∞–ª–∏—Ç—Ä—ã –ø–æ –∫—Ä—É–≥—É
            b.style.backgroundColor = iosColors[index % iosColors.length];
            
            b.onclick = () => { frame.src = l.url; toggle(false); };
            container.appendChild(b);
        });
    }

    buildMenu('sidebar-links');
    buildMenu('mobile-links');

    // –°–≤–∞–π–ø –ª–æ–≥–∏–∫–∞
    let startY = 0, currentY = 0;
    handle.addEventListener('touchstart', (e) => {
        startY = e.touches[0].clientY;
        currentY = new WebKitCSSMatrix(window.getComputedStyle(menu).transform).m42;
        menu.style.transition = 'none';
    }, {passive: false});

    handle.addEventListener('touchmove', (e) => {
        let newPos = currentY + (e.touches[0].clientY - startY);
        menu.style.transform = `translateY(${Math.max(0, newPos)}px)`;
        e.preventDefault();
    }, {passive: false});

    handle.addEventListener('touchend', () => {
        menu.style.transition = 'transform 0.5s cubic-bezier(0.16, 1, 0.3, 1)';
        let pos = new WebKitCSSMatrix(window.getComputedStyle(menu).transform).m42;
        toggle(pos < (window.innerHeight * 0.25));
    }, {passive: false});

    resetIdleTimer();
</script>
</body>
</html>
